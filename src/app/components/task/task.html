<div class="container">
  <cdk-accordion>
    <div class="example-container">
      <h2>Tarefas</h2>
      <cdk-accordion-item
        #accordionItem="cdkAccordionItem"
        class="example-accordion-item"
      >
        <button
          class="example-accordion-item-header"
          (click)="accordionItem.toggle()"
        >
          + Adicionar
          <span class="example-accordion-item-description">
            Click para {{ accordionItem.expanded ? "fechar" : "adicionar" }}
          </span>
        </button>
        @if(accordionItem.expanded) {
        <div class="example-accordion-item-body" role="region">
          <div class="example-list">
            <div class="example-box">
              <form [formGroup]="form">
                <div class="input-form">
                  <input
                    type="text"
                    class=""
                    placeholder="Tarefa"
                    formControlName="tarefa"
                  />
                  @if(form.get('tarefa')?.invalid){ * }
                </div>

                <div class="input-form">
                  <input
                    type="text"
                    class=""
                    placeholder="Descrição"
                    formControlName="descricao"
                  />
                  @if(form.get('descricao')?.invalid){ * }
                </div>
                <button class="bnt-form" (click)="adicionarTarefa()">
                  Enviar
                </button>
              </form>
            </div>
          </div>
        </div>
        }
      </cdk-accordion-item>

      <div
        cdkDropList
        #todoList="cdkDropList"
        [cdkDropListData]="todo"
        [cdkDropListConnectedTo]="doingList"
        class="example-list"
        (cdkDropListDropped)="drop($event)"
      >
        @for (item of todo; track item; let index = $index) {
        <cdk-accordion-item
          #accordionItem="cdkAccordionItem"
          class="example-accordion-item"
        >
          <button
            class="example-accordion-item-header"
            (click)="accordionItem.toggle()"
            tabindex="0"
            [attr.id]="'accordion-header-' + index"
            [attr.aria-expanded]="accordionItem.expanded"
            [attr.aria-controls]="'accordion-body-' + index"
          >
            <div class="example-box" cdkDrag>{{ item.titulo }}</div>

            <span class="example-accordion-item-description">
              Click para {{ accordionItem.expanded ? "fechar" : "abrir" }}
            </span>
          </button>
          @if(accordionItem.expanded) {
          <div
            class="example-accordion-item-body"
            role="region"
            [style.display]="accordionItem.expanded ? '' : 'none'"
            [attr.id]="'accordion-body-' + index"
            [attr.aria-labelledby]="'accordion-header-' + index"
          >
            {{ item.descricao }}
          </div>
          }
        </cdk-accordion-item>
        }
      </div>
    </div>
    <div class="example-container">
      <h2>Em andamenrto</h2>

      <div
        cdkDropList
        #doingList="cdkDropList"
        [cdkDropListData]="doing"
        [cdkDropListConnectedTo]="[todoList, doneList]"
        class="example-list"
        (cdkDropListDropped)="drop($event)"
      >
        @for (item of doing; track item; let index = $index) {
        <cdk-accordion-item
          #accordionItem="cdkAccordionItem"
          class="example-accordion-item"
        >
          <button
            class="example-accordion-item-header"
            (click)="accordionItem.toggle()"
            tabindex="0"
            [attr.id]="'accordion-header-' + index"
            [attr.aria-expanded]="accordionItem.expanded"
            [attr.aria-controls]="'accordion-body-' + index"
          >
            <div class="example-box" cdkDrag>{{ item.titulo }}</div>

            <span class="example-accordion-item-description">
              Click para {{ accordionItem.expanded ? "fechar" : "abrir" }}
            </span>
          </button>
          @if(accordionItem.expanded) {
          <div
            class="example-accordion-item-body"
            role="region"
            [style.display]="accordionItem.expanded ? '' : 'none'"
            [attr.id]="'accordion-body-' + index"
            [attr.aria-labelledby]="'accordion-header-' + index"
          >
            {{ item.descricao }}
          </div>
          }
        </cdk-accordion-item>
        }
      </div>
    </div>
    <div class="example-container">
      <h2>Feito</h2>

      <div
        cdkDropList
        #doneList="cdkDropList"
        [cdkDropListData]="done"
        [cdkDropListConnectedTo]="[doingList]"
        class="example-list"
        (cdkDropListDropped)="drop($event)"
      >
        @for (item of done; track item; let index = $index) {
        <cdk-accordion-item
          #accordionItem="cdkAccordionItem"
          class="example-accordion-item"
        >
          <button
            class="example-accordion-item-header"
            (click)="accordionItem.toggle()"
            tabindex="0"
            [attr.id]="'accordion-header-' + index"
            [attr.aria-expanded]="accordionItem.expanded"
            [attr.aria-controls]="'accordion-body-' + index"
          >
            <div class="example-box" cdkDrag>{{ item.titulo }}</div>

            <span class="example-accordion-item-description">
              Click para {{ accordionItem.expanded ? "fechar" : "abrir" }}
            </span>
          </button>
          @if(accordionItem.expanded) {
          <div
            class="example-accordion-item-body"
            role="region"
            [style.display]="accordionItem.expanded ? '' : 'none'"
            [attr.id]="'accordion-body-' + index"
            [attr.aria-labelledby]="'accordion-header-' + index"
          >
            {{ item.descricao }}
          </div>
          }
        </cdk-accordion-item>
        }
      </div>
    </div>
  </cdk-accordion>
</div>
